### [四川师范大学安全考试系统概要设计](#top) :grey_exclamation: <b id="top"></b>
`系统设计逻辑`:white_check_mark:

------

- [x] [`1.系统模块`](#module)
- [x] [`2.登录/修改密码模块`](#target1)
- [x] [`3.系统主页逻辑`](#main)
- [x] [`4.权限配置`](#power)

------
#####  :octocat: [1.系统模块](#top) <b id="module"></b>  :speech_balloon:

##### 学生场景

-----------------
```c#
                                                                                [再次填写等待申请通过]
                                                                         <---<----------------------↑ 
                                                                         |                          ↑    
                                                     [进入申请页面]        ↓             [未通过]      ↑
学生进入系统主页  ---> 查看使用帮助  /  申请加入考试计划  ----------------> 填写申请信息提交 ------------ >  |
|                            |                                            | 
| [直接进入]                  |                                            |[申请通过]    
↓                            |                                            |
登录页面     ← ← ———————————— ↓  <-<--<------------------------------------↓
|
|
↓
进行登录 ---->忘记密码  ---->修改密码[通过身份证号码]
|                            |
|         [修改完毕 再次登录]  | 
|    <------------------------ 
进行学生首页
|
| [info:第一次进入本届学生 分配学习任务]
| [info:如果非本届学生 重新分配学习任务]
↓
进行学习    ------- > [记录学习进度]
|
|  [判断是否通过考试] ------> 未通过 可继续参考 下一步 通过不能参加考试    
|                                                                                        [等待开放]
|                                     [info:不是本届需要系统允许往届可以参加考试]               |
|  [判断是否是本届] -----------------------------------> 未开放 ------------------------------>
|  [判断是否用具有未完成考卷]----> 有 -> 进入完成页面        |  
|  [判断考试次数是否用完]                                 ↓ [开放] 
|        |       |                                <---——
|        |       |[用完 可以申请重考增加次数]
|        |     
↓ ← ---[未用完]                                        
进行考试

```
-------------

#####  :octocat: [2.登录/修改密码模块](#top) <b id="target1"></b>  :speech_balloon:
`登录使用一些 View csHtml 完成`

##### 用户登录 :partly_sunny:

* `中间对象信息,传递给View 的信息`
* `只有正确才会进入下一步`
`中间对象信息 默认信息`
```c#
{
  IsFirstLogin = false; //表示是否验证结果页面
  PasswordIsRight = false; //密码是否正确
  IdetityIdIsRight = false; //账户是否正确
}
```
:one: `前端逻辑`
```c#
1.1 输入账号 -----> 使用Ajax 认证账号是否存在 不存在提示 边框变红并提示不存在此账号
1.2 输入密码 
1.3 输入验证码 ----> [验证码错误 边框立马变红 监控 input 的 change 事件判断验证码是否正确]
1.4 提交  -----> if 账号存在 and 一切都按照规定填写  { 提交到服务器 } 
1.5 前端验证结束 <<<<<----
```
:two: `后台逻辑`

```c#
2.1 验证Token 是否正确
2.2 验证账号密码输入是否为空 -----> if is null 跳转错误页面 非法提交错误 [恶意攻击错误-非正常用户] 
2.3 验证用户账号是否正确 通过身份判断----> if not 跳转错误页面 提示账号错 [恶意攻击错误-非正常用户]
      [title 信息: 系统用户必然具有学生或者管理员身份,除此之外都是非法账户]
2.4 验证账号密码是否正确 ----> if not 返回页面提示密码错误
2.5 存储 加密后的用户账号和密码进入 Cookie中 / 存储用户账号 进入Session --->[可以统计在线人数]
2.6 如果是学生 -----> 记录所属模块Id  如果是老师 记录所属单位
2.7 查看是否当前具有其他票证,有则删除其他 Seesion Cookie 和票证
2.8 发放票证 允许登录
2.9 记录 用户登录信息 根据身份分别记录
2.10 学生跳转到学生主页 管理员跳转到管理员主页
```

##### 用户修改密码
`管理员不能使用学生修改密码的功能页面`

##### 学生修改密码页面

:one: `前端逻辑`
```c#
1.1 输入账号 -----> 使用Ajax 认证账号是否存在 不存在提示 边框变红并提示不存在此账号
            -----> 如果是管理员 提示管理员需要登录后在后台页面修改密码 忘记密码可以联系系统管理员 或技术维护人员
1.2 输入密码 -----> 长度大于6位 
1.3 再次输入密码 -----> 监控 textInput事件或者键盘事件 两次面需要一样 不一样需要变红提示
1.4 身份证号需要输入 -----> 至少需要十八位 
1.5 提交到表单
```
:two: `后台逻辑`
```c#
2.1 判断token 是否正确
2.2 验证是否输入为空 ----> if is null 跳转错误页面 非法提交错误 [恶意攻击错误-非正常用户] 
2.3 验证账号是否存在 -----> if not 跳转错误页面 提示账号错 [恶意攻击错误-非正常用户]
2.4 验证身份证号码 是否正确 -----> if not 报告错误身份证号错误
2.5 修改密码
2.6 删除票证和 Cookie Session的信息 
2.7 跳转到成功页面 提示修改成功 等待 5秒跳转到登录页面
2.8 立即跳转或者 五秒后 进入登录页面
```

##### 教师修改密码

:one: `前台逻辑`
```c#
1.1 输入新密码
1.2 再次输入新密码 两次密码需要一样不一样需要提示  
1.3 提交到 URL 中 
1.4 修改成功后 修改 Cookie 存储的值
1.5 返回 Ajax Json 表示是否修改成功
```
#####  :octocat: [3.系统主页逻辑](#top) <b id="main"></b>  :speech_balloon:
`系统主页要有如下几个页面` <br/>
`1.系统主页 提供考试系统主页面`<br/>
`2.公告页面`<br/>
`3.使用帮助页面`<br/>
`4.申请加入考试页面`<br/>
`5.系统登录页面`<br/>
`6.系统密码修改页面`<br/>
 
 
 






--------------------
`版本`:`1.0.0`
`最后修改时间`:`2018年12月31日18:33:38`
 
